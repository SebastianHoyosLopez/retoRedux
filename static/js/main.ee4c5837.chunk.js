(this.webpackJsonpshoppingcart=this.webpackJsonpshoppingcart||[]).push([[0],{59:function(e,t,c){},94:function(e,t,c){},95:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),r=c(30),s=c.n(r),i=(c(59),c(11)),o=c(54),l=c(23),u=c(18),d=c.n(u),j=c(20),b=c(48),p=c.n(b),m=c(52),O=c(53),h=c(27);c(96),c(78);h.a.initializeApp({apiKey:"AIzaSyASH7P6ubcU1hF9xj-lJRjne99ugk7Xm8A",authDomain:"reto-proyecto-redux.firebaseapp.com",projectId:"reto-proyecto-redux",storageBucket:"reto-proyecto-redux.appspot.com",messagingSenderId:"672365176151",appId:"1:672365176151:web:ea0d3f32dafab9a35fca12",measurementId:"G-2SR68SEWNG"});var x=h.a.auth(),g=h.a.firestore(),f=c(49),v=c.n(f),y={loading_Product:!1,activoProduct:!1,array:[],offset:0},N="LOADING_PRODUCT",S="ADD_TO_CART",k="LOADING_ERROR",I="PRODUCT_DELETE";var w=c(8),P=c(2),R=function(){var e=Object(w.b)(),t=Object(a.useState)([]),c=Object(l.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(1),i=Object(l.a)(s,2),o=i[0],u=i[1],b=Object(a.useState)(),O=Object(l.a)(b,2),h=O[0],x=O[1],g=Object(a.useState)(""),f=Object(l.a)(g,2),y=f[0],I=f[1];return Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(d.a.mark((function e(){var t,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("https://dev2.th3insid3.com/api/products?page=".concat(o,"&search=").concat(y));case 2:t=e.sent,c=t.data.products,console.log(t.data.paginatorInfo.count),r(c),a=t.data.paginatorInfo.hasMorePages,x(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,y]),Object(P.jsxs)("div",{className:"container text-center mt-4",children:[Object(P.jsx)("h1",{children:"Product List"}),Object(P.jsxs)("div",{className:"d-flex justify-content-center mt-5",children:[o>1&&Object(P.jsx)("button",{onClick:function(){u(o-1)},className:"btn btn-warning btn-sm",children:"Anterior"}),h&&Object(P.jsx)("button",{onClick:function(){u(o+1)},className:"btn btn-warning btn-sm mx-3",children:"Siguiente"})]}),Object(P.jsx)(m.a,{className:"d-flex justify-content-around my-5 pagination",showTotal:function(e,t){return"".concat(t[o]," - ").concat(t[1]," of ").concat(e," pages")},current:o,total:471}),n&&Object(P.jsx)("div",{className:"input-group d-flex justify-content-end",children:Object(P.jsx)("div",{className:"form-outline",children:Object(P.jsx)("input",{type:"search",onChange:function(e){return I(e.target.value)},id:"form1",className:"form-control",placeholder:"Buscar"})})}),Object(P.jsx)("div",{className:"row",children:n.map((function(t){return Object(P.jsx)("div",{className:"col-md-6 col-lg-3 my-5",style:{height:"350px"},children:Object(P.jsxs)("div",{className:"card",style:{height:"400px"},children:[Object(P.jsx)("img",{src:t.image,className:"card-img-top",alt:t.name}),Object(P.jsxs)("div",{className:"card-body ",children:[Object(P.jsx)("h5",{className:"card-title",children:t.name}),Object(P.jsxs)("p",{children:["Price: ",t.price]}),Object(P.jsx)("button",{onClick:function(){return e(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(c){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c({type:N}),t.prev=1,a={name:e.name,price:e.price,image:e.image,id:v.a.generate()},!localStorage.getItem(a.id)){t.next=6;break}return c({type:S,payload:JSON.parse(localStorage.getItem(a.id))}),t.abrupt("return");case 6:c({type:S,payload:a}),localStorage.setItem(a.id,JSON.stringify(a)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),c({type:k}),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))},className:"btn btn-danger",children:"Add to cart"})]})]})},t.id)}))})]})},_={loading:!1,activo:!1},E="LOADING",A="USUARIO_ERROR",C="USUARIO_EXITO",D="SIGNOUT";var U=c(6),L=Object(U.g)((function(e){var t=Object(w.b)(),c=Object(w.c)((function(e){return e.usuario.loading})),a=Object(w.c)((function(e){return e.usuario.activo}));return n.a.useEffect((function(){a&&e.history.push("/")}),[a,e]),Object(P.jsxs)("div",{className:"mt-5 text-center",children:[Object(P.jsx)("h3",{children:"ingresar Con Google"}),Object(P.jsx)("hr",{}),Object(P.jsx)("button",{className:"btn btn-dark",onClick:function(){return t(function(){var e=Object(j.a)(d.a.mark((function e(t){var c,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:E}),e.prev=1,c=new h.a.auth.GoogleAuthProvider,e.next=5,x.signInWithPopup(c);case 5:return a=e.sent,console.log(a.user),n={uid:a.user.uid,email:a.user.email,name:a.user.displayName,photoURL:a.user.photoURL},e.next=10,g.collection("user").doc(n.email).get();case 10:if(r=e.sent,console.log(r),!r.exists){e.next=17;break}t({type:C,payload:r.data()}),localStorage.setItem("user",JSON.stringify(r.data())),e.next=21;break;case 17:return e.next=19,g.collection("user").doc(n.email).set(n);case 19:t({type:C,payload:n}),localStorage.setItem("user",JSON.stringify(n));case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(1),console.log(e.t0),t({type:A});case 27:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(t){return e.apply(this,arguments)}}())},disabled:c,children:"Acceder"})]})})),T=(c(94),c(17)),J=Object(U.g)((function(e){var t=Object(w.b)(),c=function(){t((function(e){x.signOut(),localStorage.removeItem("user"),e({type:D})})),e.history.push("/login")},a=Object(w.c)((function(e){return e.cart.array.length})),n=Object(w.c)((function(e){return e.usuario.activo})),r=Object(w.c)((function(e){return e.usuario.user}));return Object(P.jsxs)("div",{className:"navbar navbar-dark bg-dark sticky-top",children:[n?Object(P.jsx)(T.b,{className:"navbar-brand mx-4",to:"/",children:r.name}):Object(P.jsx)(T.b,{className:"navbar-brand mx-4",to:"/",children:"Redux Challenge"}),n?Object(P.jsxs)("div",{children:[Object(P.jsxs)(T.c,{to:"/cartShopping",children:[Object(P.jsx)("p",{id:"count",className:"mt-3",children:Object(P.jsx)("strong",{children:a>=1?a:null})}),Object(P.jsx)("img",{id:"imgCart",src:"https://imgbox.es/images/2021/03/16/carrito20dbc749abd24d18.th.png",style:{height:"60px"},alt:"cart"})]}),Object(P.jsx)(T.c,{className:"btn btn-dark mr-2",to:"/",exact:!0,children:"Inicio"}),Object(P.jsx)(T.c,{className:"btn btn-dark mr-2",to:"/Profile",exact:!0,children:"Perfil"}),Object(P.jsx)("button",{className:"btn btn-dark mr-2",onClick:function(){return c()},children:"Salir"})]}):Object(P.jsx)(T.c,{className:"btn btn-dark mr-2",to:"/login",exact:!0,children:"Login"})]})})),G=function(){var e=Object(w.c)((function(e){return e.usuario.user}));return console.log(e),Object(P.jsx)("div",{className:"container",children:Object(P.jsxs)("div",{className:"card text-center mt-5",children:[Object(P.jsx)("div",{className:"card-header",children:Object(P.jsx)("img",{src:e.photoURL,style:{borderRadius:"50%"},alt:"photo_Profile"})}),Object(P.jsxs)("div",{className:"card-body",children:[Object(P.jsx)("h5",{className:"card-title",children:e.name}),Object(P.jsx)("p",{className:"card-text",children:e.email})]})]})})},B=function(){var e=Object(w.b)(),t=Object(w.c)((function(e){return e.cart.array})),c=Object(w.c)((function(e){return e.cart.activoProduct}));return Object(P.jsxs)("div",{className:"container",children:[Object(P.jsx)("h1",{className:"text-center mt-2 text-uppercase",children:"Lista de productos en el carrito"}),c?Object(P.jsxs)("h3",{className:"text-uppercase text-primary mt-5",children:["Cantidad de productos en el carrito: ",t.length]}):null,Object(P.jsx)("div",{className:"row",children:c?t.map((function(t){return Object(P.jsx)("div",{className:"col-md-3 my-3 text-center",children:Object(P.jsxs)("div",{className:"card",style:{height:"320px",marginBottom:"80px"},children:[Object(P.jsx)("img",{src:t.image,className:"card-img-top",alt:""}),Object(P.jsxs)("div",{className:"card-body",children:[Object(P.jsx)("h5",{className:"card-title",children:t.name}),Object(P.jsxs)("p",{children:["Price: ",t.price]})]}),Object(P.jsx)("button",{className:"btn btn-dark btn-sm mx-3 mb-5",onClick:function(){return e(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(c,a){var n,r,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:N}),t.prev=1,n=a().usuario.user,r=a().cart.array,s=r.filter((function(t){return t.id!==e.id})),t.next=7,g.collection(n.email).doc(e.id).delete();case 7:c({type:I,payload:s}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,c){return t.apply(this,arguments)}}()}(t))},children:"Eliminar"})]})},t.id)})):Object(P.jsx)("h3",{className:"text-center mt-5",children:"No tienes ningun producto en el carrito"})})]})},X=function(){var e=n.a.useState(!1),t=Object(l.a)(e,2),c=t[0],a=t[1];n.a.useEffect((function(){x.onAuthStateChanged((function(e){a(e||null)}))}),[]);var r=function(e){var t=e.component,a=e.path,n=Object(o.a)(e,["component","path"]);return localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")).uid===c.uid?Object(P.jsx)(U.b,Object(i.a)({component:t,path:a},n)):Object(P.jsx)(U.a,Object(i.a)({to:"/login"},n))};return!1!==c?Object(P.jsx)(T.a,{children:Object(P.jsxs)("div",{children:[Object(P.jsx)(J,{}),Object(P.jsxs)(U.d,{children:[Object(P.jsx)(r,{component:R,path:"/",exact:!0}),Object(P.jsx)(r,{component:B,path:"/cartShopping",exact:!0}),Object(P.jsx)(r,{component:G,path:"/Profile",exact:!0}),Object(P.jsx)(U.b,{component:L,path:"/login",exact:!0})]})]})}):Object(P.jsx)("div",{className:"text-center",children:Object(P.jsx)("div",{className:"spinner-border",style:{marginTop:"200px"},role:"status",children:Object(P.jsx)("span",{className:"sr-only"})})})},M=c(22),z=c(51),W=Object(M.c)({usuario:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case A:return Object(i.a)({},_);case C:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,activo:!0,user:t.payload});case D:return Object(i.a)({},_);default:return Object(i.a)({},e)}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object.assign({},e,{loading_Product:!0});case S:return Object.assign({},e,{activoProduct:!0,loading_Product:!1,array:[].concat(Object(O.a)(e.array),[t.payload])});case I:return Object.assign({},e,{array:t.payload});case k:return{initialData:y};default:return Object(i.a)({},e)}}}),F=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||M.d;var H=function(){var e,t=Object(M.e)(W,F(Object(M.a)(z.a)));return e=t.dispatch,localStorage.getItem("user")&&e({type:C,payload:JSON.parse(localStorage.getItem("user"))}),t}();s.a.render(Object(P.jsx)(n.a.StrictMode,{children:Object(P.jsx)(w.a,{store:H,children:Object(P.jsx)(X,{})})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.ee4c5837.chunk.js.map