(this.webpackJsonpshoppingcart=this.webpackJsonpshoppingcart||[]).push([[0],{46:function(e,t,c){},74:function(e,t,c){"use strict";c.r(t);var a=c(0),r=c.n(a),n=c(21),s=c.n(n),i=(c(46),c(5)),o=c(41),u=c(18),d=c(17),l=c.n(d),j=c(23),b=c(38),p=c.n(b),O={loading_Product:!1,activoProduct:!1,array:[],offset:0},m="LOADING_PRODUCT",h="ADD_TO_CART",g="LOADING_ERROR";var x=c(6),f=c(1),v=function(){var e=Object(x.b)(),t=Object(a.useState)([]),c=Object(u.a)(t,2),r=c[0],n=c[1],s=Object(a.useState)(1),i=Object(u.a)(s,2),o=i[0],d=i[1],b=Object(a.useState)(),O=Object(u.a)(b,2),v=O[0],y=O[1];return Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("https://dev2.th3insid3.com/api/products?page=".concat(o));case 2:t=e.sent,c=t.data.products,n(c),a=t.data.paginatorInfo.hasMorePages,y(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o]),Object(f.jsxs)("div",{className:"container text-center mt-4",children:[Object(f.jsx)("h1",{children:"Product List"}),Object(f.jsxs)("div",{className:"d-flex justify-content-center mt-5",children:[o>1&&Object(f.jsx)("button",{onClick:function(){d(o-1)},className:"btn btn-dark btn-sm",children:"Anterior"}),v&&Object(f.jsx)("button",{onClick:function(){d(o+1)},className:"btn btn-dark btn-sm mx-3",children:"Sigiente"})]}),Object(f.jsx)("div",{className:"row",children:r.map((function(t,c){return Object(f.jsx)("div",{className:"col-md-6 col-lg-3 my-5",style:{height:"350px"},children:Object(f.jsxs)("div",{className:"card",children:[Object(f.jsx)("img",{src:t.image,className:"card-img-top",alt:t.name}),Object(f.jsxs)("div",{className:"card-body ",children:[Object(f.jsx)("h5",{className:"card-title",children:t.name}),Object(f.jsxs)("p",{children:["Price: ",t.price]}),Object(f.jsx)("button",{onClick:function(){return e(function(e){return function(t,c){if(t({type:m}),localStorage.getItem("product"))return console.log("datos guardados"),void t({type:h,payload:JSON.parse(localStorage.getItem("product"))});var a={name:e.name,id:e.id,price:e.price,image:e.image};try{t({type:h,payload:a}),localStorage.setItem("product",JSON.stringify({name:e.name,id:e.id,price:e.price,image:e.image}))}catch(r){t({type:g})}}}(t))},className:"btn btn-dark",children:"Add to cart"})]})]})},c)}))})]})},y=c(24);c(71);y.a.initializeApp({apiKey:"AIzaSyASH7P6ubcU1hF9xj-lJRjne99ugk7Xm8A",authDomain:"reto-proyecto-redux.firebaseapp.com",projectId:"reto-proyecto-redux",storageBucket:"reto-proyecto-redux.appspot.com",messagingSenderId:"672365176151",appId:"1:672365176151:web:ea0d3f32dafab9a35fca12",measurementId:"G-2SR68SEWNG"});var N=y.a.auth(),S={loading:!1,activo:!1},I="LOADING",k="USUARIO_ERROR",A="USUARIO_EXITO",_="SIGNOUT";var w=c(4),E=Object(w.g)((function(e){var t=Object(x.b)(),c=Object(x.c)((function(e){return e.usuario.loading})),a=Object(x.c)((function(e){return e.usuario.activo}));return r.a.useEffect((function(){a&&e.history.push("/")}),[a,e]),Object(f.jsxs)("div",{className:"mt-5 text-center",children:[Object(f.jsx)("h3",{children:"ingresar Con Google"}),Object(f.jsx)("hr",{}),Object(f.jsx)("button",{className:"btn btn-dark",onClick:function(){return t(function(){var e=Object(j.a)(l.a.mark((function e(t){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:I}),e.prev=1,c=new y.a.auth.GoogleAuthProvider,e.next=5,N.signInWithPopup(c);case 5:a=e.sent,t({type:A,payload:{uid:a.user.uid,email:a.user.email,nombre:a.user.displayName}}),localStorage.setItem("user",JSON.stringify({uid:a.user.uid,email:a.user.email,nombre:a.user.displayName})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t({type:k});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}())},disabled:c,children:"Acceder"})]})})),P=c(14),R=Object(w.g)((function(e){var t=Object(x.b)(),c=function(){t((function(e){N.signOut(),localStorage.removeItem("user"),e({type:_})})),e.history.push("/login")},a=Object(x.c)((function(e){return e.usuario.activo})),r=Object(x.c)((function(e){return e.usuario.user}));return Object(f.jsxs)("div",{className:"navbar navbar-dark bg-dark",children:[a?Object(f.jsx)(P.b,{className:"navbar-brand mx-4",to:"/",children:r.nombre}):Object(f.jsx)(P.b,{className:"navbar-brand mx-4",to:"/",children:"Redux Challenge"}),a?Object(f.jsxs)("div",{className:"",children:[Object(f.jsx)(P.c,{to:"/cartShopping",children:Object(f.jsx)("img",{src:"https://imgur.com/w4yBTk5.jpg",style:{height:"60px"},alt:"cart"})}),Object(f.jsx)(P.c,{className:"btn btn-dark mr-2",to:"/",exact:!0,children:"Inicio"}),Object(f.jsx)("button",{className:"btn btn-dark mr-2",onClick:function(){return c()},children:"Salir"})]}):Object(f.jsx)(P.c,{className:"btn btn-dark mr-2",to:"/login",exact:!0,children:"Login"})]})})),C=function(){var e=Object(x.c)((function(e){return e.cart.array})),t=Object(x.c)((function(e){return e.cart.activoProduct})),c=Object(x.b)();return Object(a.useEffect)((function(){c((function(e){if(e({type:m}),localStorage.getItem("product"))return console.log("datos guardados"),void e({type:h,payload:JSON.parse([localStorage.getItem("product")])})}))}),[c]),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("h1",{className:"text-center mt-2 text-uppercase",children:"Lista de productos en el carrito"}),t?e.map((function(e){return Object(f.jsx)("div",{className:"col-md-6 col-lg-3 mx-5 my-5 text-center",style:{height:"350px"},children:Object(f.jsxs)("div",{className:"card",children:[Object(f.jsx)("img",{src:e.image,className:"card-img-top",alt:""}),Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h5",{className:"card-title",children:e.name}),Object(f.jsxs)("p",{children:["Price: ",e.price]})]}),Object(f.jsx)("button",{className:"btn btn-dark btn-sm",children:"Eliminar"})]})},e.id)})):Object(f.jsx)("h3",{className:"text-center mt-5",children:"No tienes ningun producto en el carrito"})]})},D=function(){var e=r.a.useState(!1),t=Object(u.a)(e,2),c=t[0],a=t[1];r.a.useEffect((function(){N.onAuthStateChanged((function(e){a(e||null)}))}),[]);var n=function(e){var t=e.component,a=e.path,r=Object(o.a)(e,["component","path"]);return localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")).uid===c.uid?Object(f.jsx)(w.b,Object(i.a)({component:t,path:a},r)):Object(f.jsx)(w.a,Object(i.a)({to:"/login"},r))};return!1!==c?Object(f.jsx)(P.a,{children:Object(f.jsxs)("div",{children:[Object(f.jsx)(R,{}),Object(f.jsxs)(w.d,{children:[Object(f.jsx)(n,{component:v,path:"/",exact:!0}),Object(f.jsx)(n,{component:C,path:"/cartShopping",exact:!0}),Object(f.jsx)(w.b,{component:E,path:"/login",exact:!0})]})]})}):Object(f.jsx)("div",{className:"text-center",children:Object(f.jsx)("div",{className:"spinner-border",role:"status",children:Object(f.jsx)("span",{className:"sr-only"})})})},J=c(15),G=c(40),T=Object(J.c)({usuario:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case k:return Object(i.a)({},S);case A:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,activo:!0,user:t.payload});case _:return Object(i.a)({},S);default:return Object(i.a)({},e)}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(i.a)(Object(i.a)({},e),{},{loading_Product:!0});case h:return Object(i.a)(Object(i.a)({},e),{},{activoProduct:!0,loading_Product:!1,array:[t.payload]});case g:return{initialData:O};default:return Object(i.a)({},e)}}}),U=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||J.d;var L=function(){var e,t=Object(J.e)(T,U(Object(J.a)(G.a)));return e=t.dispatch,localStorage.getItem("user")&&e({type:A,payload:JSON.parse(localStorage.getItem("user"))}),t}();s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(x.a,{store:L,children:Object(f.jsx)(D,{})})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.20dd6b80.chunk.js.map