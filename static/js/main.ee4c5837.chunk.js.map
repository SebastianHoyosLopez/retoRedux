{"version":3,"sources":["firebase.js","redux/ShoppingCartDucks.js","components/Products.jsx","redux/UsuarioDucks.js","components/Login.jsx","components/Navbar.jsx","components/Profile.jsx","components/ShoppingCart.jsx","App.jsx","redux/store.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","firestore","initialData","loading_Product","activoProduct","array","offset","LOADING_PRODUCT","ADD_TO_CART","LOADING_ERROR","PRODUCT_DELETE","Products","dispatch","useDispatch","useState","products","setProducts","currentPage","setCurrentPage","hasMoreCount","setHasMoreCount","nameProduct","setNameProduct","useEffect","a","axios","get","response","data","console","log","paginatorInfo","count","hasMorePages","fetchData","className","onClick","showTotal","total","range","current","type","onChange","e","target","value","id","placeholder","map","style","height","src","image","alt","name","price","product","shortid","generate","localStorage","getItem","payload","JSON","parse","setItem","stringify","addToCart","loading","activo","LOADING","USUARIO_ERROR","USUARIO_EXITO","SIGN_OUT","withRouter","props","useSelector","store","usuario","React","history","push","provider","GoogleAuthProvider","signInWithPopup","res","user","uid","email","displayName","photoURL","collection","doc","userDB","exists","set","disabled","SignO","signOut","removeItem","cart","length","to","exact","Profile","borderRadius","ShoppingCart","productsCart","marginBottom","getState","arrayFiltrado","filter","item","delete","deleteProduct","App","firebaseUser","setFireBaseUser","onAuthStateChanged","ProtectedRoute","component","path","rest","Login","marginTop","role","rootReducer","combineReducers","state","action","Object","assign","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","thunk","generateStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ee4c5837.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport 'firebase/firestore'\r\nimport \"firebase/auth\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyASH7P6ubcU1hF9xj-lJRjne99ugk7Xm8A\",\r\n  authDomain: \"reto-proyecto-redux.firebaseapp.com\",\r\n  projectId: \"reto-proyecto-redux\",\r\n  storageBucket: \"reto-proyecto-redux.appspot.com\",\r\n  messagingSenderId: \"672365176151\",\r\n  appId: \"1:672365176151:web:ea0d3f32dafab9a35fca12\",\r\n  measurementId: \"G-2SR68SEWNG\",\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nconst auth = firebase.auth()\r\nconst db = firebase.firestore()\r\n\r\nexport { auth, firebase, db }","import { db } from \"../firebase\";\r\nimport shortid from \"shortid\";\r\n//const\r\nconst initialData = {\r\n  loading_Product: false,\r\n  activoProduct: false,\r\n  array: [],\r\n  offset: 0,\r\n};\r\n//type\r\nconst LOADING_PRODUCT = \"LOADING_PRODUCT\";\r\nconst ADD_TO_CART = \"ADD_TO_CART\";\r\nconst LOADING_ERROR = \"LOADING_ERROR\";\r\nconst PRODUCT_DELETE = \"PRODUCT_DELETE\";\r\n\r\n//reducer\r\nexport default function shoppingReducer(state = initialData, action) {\r\n  switch (action.type) {\r\n    case LOADING_PRODUCT:\r\n      return Object.assign({}, state, { loading_Product: true });\r\n    case ADD_TO_CART:\r\n      return Object.assign({}, state, {\r\n        activoProduct: true,\r\n        loading_Product: false,\r\n        array: [...state.array, action.payload],\r\n      });\r\n    case PRODUCT_DELETE:\r\n      return Object.assign({}, state, { array: action.payload });\r\n    case LOADING_ERROR:\r\n      return { initialData };\r\n    default:\r\n      return { ...state };\r\n  }\r\n}\r\n\r\n//action\r\n\r\nexport const deleteProduct = (products) => async (dispatch, getState) => {\r\n  dispatch({\r\n    type: LOADING_PRODUCT,\r\n  });\r\n\r\n  try {\r\n    const user = getState().usuario.user;\r\n    const array = getState().cart.array;\r\n    const arrayFiltrado = array.filter((item) => item.id !== products.id);\r\n    await db.collection(user.email).doc(products.id).delete();\r\n\r\n    dispatch({\r\n      type: PRODUCT_DELETE,\r\n      payload: arrayFiltrado,\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const addToCart = (products) => async (dispatch) => {\r\n  dispatch({\r\n    type: LOADING_PRODUCT,\r\n  });\r\n  try {\r\n    const product = {\r\n      name: products.name,\r\n      price: products.price,\r\n      image: products.image,\r\n      id: shortid.generate(),\r\n    };\r\n\r\n    if (localStorage.getItem(product.id)) {\r\n      dispatch({\r\n        type: ADD_TO_CART,\r\n        payload: JSON.parse(localStorage.getItem(product.id)),\r\n      });\r\n      return;\r\n    }\r\n    dispatch({\r\n      type: ADD_TO_CART,\r\n      payload: product,\r\n    });\r\n    localStorage.setItem(product.id, JSON.stringify(product));\r\n  } catch (error) {\r\n    dispatch({\r\n      type: LOADING_ERROR,\r\n    });\r\n    console.log(error);\r\n  }\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Pagination from \"rc-pagination\";\r\n\r\nimport { addToCart } from \"../redux/ShoppingCartDucks\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst Products = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const [products, setProducts] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [hasMoreCount, setHasMoreCount] = useState();\r\n  const [nameProduct, setNameProduct] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const response = await axios.get(\r\n        `https://dev2.th3insid3.com/api/products?page=${currentPage}&search=${nameProduct}`\r\n      );\r\n      const products = response.data.products;\r\n      console.log(response.data.paginatorInfo.count);\r\n      setProducts(products);\r\n      const hasMorePages = response.data.paginatorInfo.hasMorePages;\r\n      setHasMoreCount(hasMorePages);\r\n    }\r\n    fetchData();\r\n  }, [currentPage, nameProduct]);\r\n\r\n  return (\r\n    <div className=\"container text-center mt-4\">\r\n      <h1>Product List</h1>\r\n      <div className=\"d-flex justify-content-center mt-5\">\r\n        {currentPage > 1 && (\r\n          <button\r\n            onClick={() => {\r\n              setCurrentPage(currentPage - 1);\r\n            }}\r\n            className=\"btn btn-warning btn-sm\"\r\n          >\r\n            Anterior\r\n          </button>\r\n        )}\r\n        {hasMoreCount && (\r\n          <button\r\n            onClick={() => {\r\n              setCurrentPage(currentPage + 1);\r\n            }}\r\n            className=\"btn btn-warning btn-sm mx-3\"\r\n          >\r\n            Siguiente\r\n          </button>\r\n        )}\r\n      </div>\r\n      <Pagination\r\n        className=\"d-flex justify-content-around my-5 pagination\"\r\n        showTotal={(total, range) =>\r\n          `${range[currentPage]} - ${range[1]} of ${total} pages`\r\n        }\r\n        current={currentPage}        \r\n        total={471}\r\n      />\r\n      {products && (\r\n        <div className=\"input-group d-flex justify-content-end\">\r\n          <div className=\"form-outline\">\r\n            <input\r\n              type=\"search\"\r\n              onChange={(e) => setNameProduct(e.target.value)}\r\n              id=\"form1\"\r\n              className=\"form-control\"\r\n              placeholder=\"Buscar\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"row\">\r\n        {products.map((products) => (\r\n          <div\r\n            key={products.id}\r\n            className=\"col-md-6 col-lg-3 my-5\"\r\n            style={{ height: \"350px\" }}\r\n          >\r\n            <div className=\"card\" style={{ height: \"400px\" }}>\r\n              <img\r\n                src={products.image}\r\n                className=\"card-img-top\"\r\n                alt={products.name}\r\n              />\r\n              <div className=\"card-body \">\r\n                <h5 className=\"card-title\">{products.name}</h5>\r\n                <p>Price: {products.price}</p>\r\n                <button\r\n                  onClick={() => dispatch(addToCart(products))}\r\n                  className=\"btn btn-danger\"\r\n                >\r\n                  Add to cart\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n","import { auth, firebase, db } from \"../firebase\";\r\n\r\n// constantes\r\n\r\nconst initialData = {\r\n  loading: false,\r\n  activo: false,\r\n};\r\n\r\n//type\r\nconst LOADING = \"LOADING\";\r\nconst USUARIO_ERROR = \"USUARIO_ERROR\";\r\nconst USUARIO_EXITO = \"USUARIO_EXITO\";\r\nconst SIGN_OUT = \"SIGNOUT\";\r\n\r\n// reducer\r\nexport default function usuarioReducer(state = initialData, action) {\r\n  switch (action.type) {\r\n    case LOADING:\r\n      return { ...state, loading: true };\r\n    case USUARIO_ERROR:\r\n      return { ...initialData };\r\n    case USUARIO_EXITO:\r\n      return { ...state, loading: false, activo: true, user: action.payload };\r\n    case SIGN_OUT:\r\n      return { ...initialData };\r\n    default:\r\n      return { ...state };\r\n  }\r\n}\r\n\r\n// action\r\n\r\nexport const loginUserAction = () => async (dispatch) => {\r\n  dispatch({\r\n    type: LOADING,\r\n  });\r\n  try {\r\n    const provider = new firebase.auth.GoogleAuthProvider();\r\n    const res = await auth.signInWithPopup(provider);\r\n    console.log(res.user);\r\n\r\n    const user = {\r\n      uid: res.user.uid,\r\n      email: res.user.email,\r\n      name: res.user.displayName,\r\n      photoURL: res.user.photoURL,\r\n    };\r\n\r\n    const userDB = await db.collection(\"user\").doc(user.email).get();\r\n    console.log(userDB);\r\n    if (userDB.exists) {\r\n      //cuando existe el usuario en firestore\r\n      dispatch({\r\n        type: USUARIO_EXITO,\r\n        payload: userDB.data(),\r\n      });\r\n      localStorage.setItem(\"user\", JSON.stringify(userDB.data() ));\r\n    } else {\r\n      //no existe el usuario firestore\r\n      await db.collection(\"user\").doc(user.email).set(user);\r\n      dispatch({\r\n        type: USUARIO_EXITO,\r\n        payload: user, \r\n      });\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n    dispatch({\r\n      type: USUARIO_ERROR,\r\n    });\r\n  }\r\n};\r\n\r\nexport const activeUserAction = () => (dispatch) => {\r\n  if (localStorage.getItem(\"user\")) {\r\n    dispatch({\r\n      type: USUARIO_EXITO,\r\n      payload: JSON.parse(localStorage.getItem(\"user\")),\r\n    });\r\n  }\r\n};\r\n\r\nexport const signOut = () => (dispatch) => {\r\n  auth.signOut();\r\n  localStorage.removeItem(\"user\");\r\n  dispatch({\r\n    type: SIGN_OUT,\r\n  });\r\n};\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { loginUserAction } from \"../redux/UsuarioDucks\";\r\n\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst Login = (props) => {\r\n  const dispatch = useDispatch();\r\n  const loading = useSelector((store) => store.usuario.loading);\r\n  const activo = useSelector((store) => store.usuario.activo);\r\n\r\n  React.useEffect(() => {\r\n    if (activo) {\r\n      props.history.push(\"/\");\r\n    } \r\n  }, [activo, props]);\r\n\r\n  return (\r\n    <div className=\"mt-5 text-center\">\r\n      <h3>ingresar Con Google</h3>\r\n      <hr />\r\n      <button\r\n        className=\"btn btn-dark\"\r\n        onClick={() => dispatch(loginUserAction())}\r\n        disabled={loading}\r\n      >\r\n        Acceder\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(Login);\r\n","import React from \"react\";\r\nimport \"./style/Navbar.css\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { signOut } from \"../redux/UsuarioDucks\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst Navbar = (props) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const SignO = () => {\r\n    dispatch(signOut());\r\n    props.history.push(\"/login\");\r\n  };\r\n\r\n  const count = useSelector((store) => store.cart.array.length);\r\n\r\n  const activo = useSelector((store) => store.usuario.activo);\r\n  const user = useSelector((store) => store.usuario.user);\r\n\r\n  return (\r\n    <div className=\"navbar navbar-dark bg-dark sticky-top\">\r\n      {activo ? (\r\n        <Link className=\"navbar-brand mx-4\" to=\"/\">\r\n          {user.name}\r\n        </Link>\r\n      ) : (\r\n        <Link className=\"navbar-brand mx-4\" to=\"/\">\r\n          Redux Challenge\r\n        </Link>\r\n      )}\r\n      {activo ? (\r\n        <div>\r\n          <NavLink to=\"/cartShopping\">\r\n            <p id=\"count\" className=\"mt-3\">\r\n              <strong>{count >= 1 ? count : null}</strong>\r\n            </p>\r\n            <img\r\n              id=\"imgCart\"\r\n              src=\"https://imgbox.es/images/2021/03/16/carrito20dbc749abd24d18.th.png\"\r\n              style={{ height: \"60px\" }}\r\n              alt=\"cart\"\r\n            />\r\n          </NavLink>\r\n          <NavLink className=\"btn btn-dark mr-2\" to=\"/\" exact>\r\n            Inicio\r\n          </NavLink>\r\n          <NavLink className=\"btn btn-dark mr-2\" to=\"/Profile\" exact>\r\n            Perfil\r\n          </NavLink>\r\n          <button className=\"btn btn-dark mr-2\" onClick={() => SignO()}>\r\n            Salir\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <NavLink className=\"btn btn-dark mr-2\" to=\"/login\" exact>\r\n          Login\r\n        </NavLink>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(Navbar);\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst Profile = () => {\r\n  const user = useSelector((store) => store.usuario.user);\r\n  console.log(user);\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"card text-center mt-5\">\r\n        <div className=\"card-header\">\r\n          <img\r\n            src={user.photoURL}\r\n            style={{ borderRadius: \"50%\" }}\r\n            alt=\"photo_Profile\"\r\n          />\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title\">{user.name}</h5>\r\n          <p className=\"card-text\">{user.email}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React from \"react\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { deleteProduct } from \"../redux/ShoppingCartDucks\";\r\n\r\nconst ShoppingCart = () => {\r\n  const dispatch = useDispatch();\r\n  const productsCart = useSelector((store) => store.cart.array);\r\n  const activo = useSelector((store) => store.cart.activoProduct);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1 className=\"text-center mt-2 text-uppercase\">\r\n        Lista de productos en el carrito\r\n      </h1>\r\n      {activo ? (\r\n        <h3 className=\"text-uppercase text-primary mt-5\">\r\n          Cantidad de productos en el carrito: {productsCart.length}\r\n        </h3>\r\n      ) : null}\r\n      <div className=\"row\">\r\n        {activo ? (\r\n          productsCart.map((products) => (\r\n            <div\r\n              key={products.id}\r\n              className=\"col-md-3 my-3 text-center\"\r\n            >\r\n              <div className=\"card\" style={{ height: \"320px\", marginBottom:\"80px\" }}>\r\n                <img src={products.image} className=\"card-img-top\" alt=\"\" />\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\">{products.name}</h5>\r\n                  <p>Price: {products.price}</p>\r\n                </div>\r\n                <button\r\n                  className=\"btn btn-dark btn-sm mx-3 mb-5\"\r\n                  onClick={() => dispatch(deleteProduct(products))}\r\n                >\r\n                  Eliminar\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <h3 className=\"text-center mt-5\">\r\n            No tienes ningun producto en el carrito\r\n          </h3>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShoppingCart;\r\n","import React from \"react\";\r\nimport Products from \"./components/Products.jsx\";\r\nimport Login from \"./components/Login.jsx\";\r\nimport Navbar from \"./components/Navbar.jsx\";\r\nimport Profile from \"./components/Profile.jsx\";\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\nimport { auth } from \"./firebase.js\";\r\nimport ShoppingCart from \"./components/ShoppingCart.jsx\";\r\n\r\nconst App = () => {\r\n  const [firebaseUser, setFireBaseUser] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    const fetchUser = () => {\r\n      auth.onAuthStateChanged((user) => {\r\n        if (user) {\r\n          setFireBaseUser(user);\r\n        } else {\r\n          setFireBaseUser(null);\r\n        }\r\n      });\r\n    };\r\n    fetchUser();\r\n  }, []);\r\n\r\n  const ProtectedRoute = ({ component, path, ...rest }) => {\r\n    if (localStorage.getItem(\"user\")) {\r\n      const userStorage = JSON.parse(localStorage.getItem(\"user\"));\r\n      if (userStorage.uid === firebaseUser.uid) {\r\n        return <Route component={component} path={path} {...rest} />;\r\n      } else {\r\n        return <Redirect to=\"/login\" {...rest} />;\r\n      }\r\n    } else {\r\n      return <Redirect to=\"/login\" {...rest} />;\r\n    }\r\n  };\r\n\r\n  return firebaseUser !== false ? (\r\n    <Router>\r\n      <div>\r\n        <Navbar />\r\n        <Switch>\r\n          <ProtectedRoute component={Products} path=\"/\" exact />\r\n          <ProtectedRoute component={ShoppingCart} path=\"/cartShopping\" exact />\r\n          <ProtectedRoute component={Profile} path=\"/Profile\" exact />\r\n          <Route component={Login} path=\"/login\" exact />\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  ) : (\r\n    <div className=\"text-center\">\r\n      <div className=\"spinner-border\" style={{marginTop:\"200px\"}} role=\"status\">\r\n        <span className=\"sr-only\"></span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { createStore, combineReducers, compose, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport shoppingReducer from \"./ShoppingCartDucks\";\r\nimport usuarioReducer, { activeUserAction } from \"./UsuarioDucks\";\r\n\r\nconst rootReducer = combineReducers({\r\n  usuario: usuarioReducer,\r\n  cart: shoppingReducer,\r\n});\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport default function generateStore() {\r\n  const store = createStore(\r\n    rootReducer,\r\n    composeEnhancers(applyMiddleware(thunk))\r\n  );\r\n  activeUserAction()(store.dispatch);\r\n  return store;\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App.jsx\";\r\n\r\nimport { Provider } from \"react-redux\";\r\nimport generateStore from \"./redux/store\";\r\n\r\nconst store = generateStore();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}